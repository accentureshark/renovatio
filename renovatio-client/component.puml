@startuml
' renovatio-client Component Diagram

title Renovatio Client - API Consumer & CLI

package "renovatio-client" {
  
  ' Client Core
  package "Client Core" {
    [ClientMain] #Orange
    [ApiClient] #Orange
    [ConfigurationManager] #Orange
    [AuthenticationManager] #Orange
  }
  
  ' API Consumers
  package "API Consumers" {
    [RestApiConsumer] #LightBlue
    [McpApiConsumer] #LightBlue
    [WebSocketConsumer] #LightBlue
  }
  
  ' Command Line Interface
  package "CLI Framework" {
    [CliCommandParser] #LightCyan
    [CliExecutor] #LightCyan
    [CliResultFormatter] #LightCyan
    [CliProgressBar] #LightCyan
  }
  
  ' Client Services
  package "Client Services" {
    [RefactorClientService] #LightYellow
    [ToolClientService] #LightYellow
    [WorkspaceClientService] #LightYellow
    [ReportClientService] #LightYellow
  }
  
  ' Utilities
  package "Client Utilities" {
    [ResponseMapper] #LightGreen
    [ErrorHandler] #LightGreen
    [ConfigLoader] #LightGreen
    [OutputFormatter] #LightGreen
  }
}

' External dependencies
[renovatio-core] #Orange
[HTTP Client] #LightGray
[JSON Parser] #LightGray
[CLI Framework] #LightGray

' Client core
ClientMain --> ApiClient : Uses
ClientMain --> ConfigurationManager : Configured by
ClientMain --> AuthenticationManager : Authentication
ApiClient --> ConfigurationManager : Configuration

' API consumers
ApiClient --> RestApiConsumer : REST Calls
ApiClient --> McpApiConsumer : MCP Calls
ApiClient --> WebSocketConsumer : WebSocket
RestApiConsumer --> [HTTP Client] : HTTP
McpApiConsumer --> [JSON Parser] : JSON-RPC

' CLI framework
ClientMain --> CliCommandParser : CLI
CliCommandParser --> CliExecutor : Executes
CliExecutor --> CliResultFormatter : Formats
CliExecutor --> CliProgressBar : Progress
CliCommandParser --> [CLI Framework] : Framework

' Client services
CliExecutor --> RefactorClientService : Refactoring
CliExecutor --> ToolClientService : Tools
CliExecutor --> WorkspaceClientService : Workspace
CliExecutor --> ReportClientService : Reports

' Service implementation
RefactorClientService --> RestApiConsumer : Uses
ToolClientService --> McpApiConsumer : Uses
WorkspaceClientService --> RestApiConsumer : Uses
ReportClientService --> RestApiConsumer : Uses

' Utilities
RestApiConsumer --> ResponseMapper : Maps Response
McpApiConsumer --> ResponseMapper : Maps Response
ApiClient --> ErrorHandler : Error Handling
CliResultFormatter --> OutputFormatter : Formats
ConfigurationManager --> ConfigLoader : Loads Config

' Direct core usage (when used as library)
ClientMain ..> [renovatio-core] : Library Mode

note top of ApiClient
  **API Client**
  - REST API consumption
  - MCP protocol support
  - WebSocket connections
  - Authentication
end note

note bottom of CliExecutor
  **CLI Interface**
  - Command-line interface
  - Progress visualization
  - Result formatting
  - Interactive mode
end note

note right of [renovatio-core]
  **Library Mode**
  - Direct core usage
  - Embedded scenarios
  - Local processing
  - No network calls
end note

@enduml


# Renovatio - Plataforma Multi-Lenguaje de Refactorizaci√≥n con MCP

**Renovatio** es una plataforma completa de refactorizaci√≥n multi-lenguaje completamente compatible con el Protocolo de Contenido de Modelo (MCP, Model Content Protocol). Expone funcionalidades avanzadas de refactorizaci√≥n y migraci√≥n para **Java** (mediante OpenRewrite) y **COBOL** (mediante parsers especializados y generaci√≥n de c√≥digo), facilitando la modernizaci√≥n de aplicaciones legacy y la refactorizaci√≥n automatizada de c√≥digo.

## Caracter√≠sticas

### ‚úÖ Protocolo MCP y Compatibilidad
- **Compatibilidad total con MCP (Model Content Protocol)**: Implementa el est√°ndar MCP versi√≥n `2025-06-18` y el protocolo JSON-RPC 2.0 completo.
- **API REST y MCP**: Soporta tanto endpoints REST tradicionales como el protocolo MCP en la ra√≠z (`/`).
- **Documentaci√≥n OpenAPI**: Interfaz Swagger UI para explorar la API.
- **Manejo de errores robusto**: C√≥digos de error apropiados y mensajes informativos.
- **Esquemas de herramientas**: Definiciones completas de entrada/salida para cada herramienta.
- **Prompts y Recursos MCP**: Listado y acceso a prompts y recursos del servidor.

### ‚òï Refactorizaci√≥n Java (OpenRewrite)
- **Exposici√≥n completa de OpenRewrite**: Todas las recetas de OpenRewrite est√°n disponibles como herramientas MCP.
- **Formato y limpieza autom√°tica**: Herramientas de formateo y optimizaci√≥n de c√≥digo Java.
- **Migraci√≥n de versiones**: Actualizaciones autom√°ticas entre versiones de Java (8‚Üí11‚Üí17‚Üí21).
- **Mejoras de seguridad**: Detecci√≥n y correcci√≥n de vulnerabilidades de seguridad.
- **An√°lisis est√°tico**: Identificaci√≥n de patrones problem√°ticos y optimizaciones.

### üè¢ Migraci√≥n COBOL a Java
- **An√°lisis profundo de COBOL**: Parsing avanzado con soporte para parsers ProLeap/Koopa.
- **Generaci√≥n de c√≥digo Java**: DTOs, servicios, controladores REST con documentaci√≥n OpenAPI y mappers MapStruct autom√°ticos.
- **Planificaci√≥n de migraci√≥n**: Sistema Plan/Apply con capacidades de dry-run y rollback.
- **B√∫squeda e indexaci√≥n**: Integraci√≥n con Apache Lucene para b√∫squeda de s√≠mbolos y an√°lisis de dependencias.
- **M√©tricas de c√≥digo**: An√°lisis de complejidad ciclom√°tica y evaluaci√≥n de la complejidad de migraci√≥n.
- **Patrones de resistencia**: Circuit breakers, reintentos y monitoreo para operaciones robustas.
- **Generaci√≥n basada en plantillas**: Sistema Freemarker para generaci√≥n sofisticada de c√≥digo.
- **Generaci√≥n de modelos desde copybooks**: Adaptadores de datasets y modelos Java creados autom√°ticamente a partir de copybooks COBOL.
- **Migraci√≥n DB2**: Conversi√≥n de SQL embebido a APIs modernas JPA/Hibernate.
- **Detecci√≥n y exposici√≥n de CICS**: Identificaci√≥n de comandos `EXEC CICS`, generaci√≥n de controladores REST e integraci√≥n con cliente Zowe/JCICS.
- **Conversi√≥n de JCL**: Parser JCL que genera AST y traduce pasos a scripts shell, GitHub Actions, Spring Batch o Airflow.

## Est√°ndar Model Content Protocol (MCP)

Renovatio implementa el est√°ndar **Model Content Protocol (MCP)**, permitiendo interoperabilidad con clientes modernos como VS Code, Copilot Workspace, y cualquier cliente MCP. Soporta los m√©todos MCP principales:

- `initialize`, `shutdown`, `ping`, `restart`
- `tools/list`, `tools/call`, `tools/describe`
- `capabilities`, `server/info`
- `content/read`, `content/write`
- `workspace/list`, `workspace/describe`
- `prompts/list`, `prompts/get`
- `resources/list`, `resources/read`

Todas las respuestas siguen el formato JSON-RPC 2.0, asegurando compatibilidad y f√°cil integraci√≥n.

## Interoperabilidad y Compatibilidad

Renovatio es compatible con cualquier cliente MCP, incluyendo:
- **Visual Studio Code** (con extensiones MCP)
- **Copilot Workspace**
- Herramientas de automatizaci√≥n y an√°lisis que soporten MCP

### Ejemplo de configuraci√≥n de cliente MCP (VS Code)

Agrega la siguiente configuraci√≥n en tu cliente MCP (por ejemplo, VS Code):

```json
{
  "id": "renovatio-local",
  "name": "Renovatio - Refactor MCP Server (Local)",
  "description": "Refactor MCP Server for code analysis and transformation",
  "url": "http://localhost:8181/mcp/",
  "implemented": true,
  "prewarm": true
}
```

## Herramientas Disponibles

Renovatio expone m√°s de 23 herramientas de refactorizaci√≥n y migraci√≥n organizadas en categor√≠as:

### ‚òï Herramientas Java (OpenRewrite)

#### üé® Formato y Limpieza
- `org.openrewrite.java.format.AutoFormat` - Formatear c√≥digo Java autom√°ticamente
- `org.openrewrite.java.cleanup.UnnecessaryParentheses` - Eliminar par√©ntesis innecesarios
- `org.openrewrite.java.cleanup.EmptyBlock` - Eliminar bloques vac√≠os
- `org.openrewrite.java.cleanup.ExplicitInitialization` - Eliminar inicializaci√≥n expl√≠cita a valores por defecto
- `org.openrewrite.java.cleanup.FinalizePrivateFields` - Finalizar campos privados no reasignados

#### üîß Mejoras de C√≥digo
- `org.openrewrite.java.cleanup.BigDecimalRoundingConstantsToEnums` - Reemplazar constantes BigDecimal con enums
- `org.openrewrite.java.cleanup.BooleanChecksNotInverted` - Reemplazar verificaciones booleanas invertidas
- `org.openrewrite.java.cleanup.CaseInsensitiveComparisonsDoNotChangeCase` - Usar m√©todos de comparaci√≥n case-insensitive
- `org.openrewrite.java.cleanup.ChainStringBuilderAppendCalls` - Encadenar llamadas StringBuilder.append
- `org.openrewrite.java.cleanup.CovariantEquals` - Usar equals covariantes

#### üöÄ Migraci√≥n de Versiones
- `org.openrewrite.java.migrate.Java8toJava11` - Migrar de Java 8 a Java 11
- `org.openrewrite.java.migrate.JavaVersion11` - Actualizar a Java 11
- `org.openrewrite.java.migrate.JavaVersion17` - Actualizar a Java 17
- `org.openrewrite.java.migrate.JavaVersion21` - Actualizar a Java 21

#### üîí Seguridad
- `org.openrewrite.java.security.FindJdbcUrl` - Encontrar URLs JDBC
- `org.openrewrite.java.security.FindSqlInjection` - Encontrar vulnerabilidades de inyecci√≥n SQL
- `org.openrewrite.java.security.SecureRandomPrefersDefaultSeed` - Usar SecureRandom con semilla por defecto

### üè¢ Herramientas COBOL (Migraci√≥n a Java)

#### üîç An√°lisis y Parsing
- `cobol.analyze` - An√°lisis profundo de programas COBOL con extracci√≥n de AST
  - Detecci√≥n de s√≠mbolos (data items, p√°rrafos, secciones)
  - An√°lisis de dependencias entre programas
  - Extracci√≥n de estructura de datos y l√≥gica de procedimientos
  - Soporte para m√©tricas de complejidad integradas

#### ‚òï Generaci√≥n de C√≥digo Java
- `cobol.generate.stubs` - Generaci√≥n autom√°tica de c√≥digo Java desde COBOL
  - **DTOs**: Generaci√≥n de clases de datos con mapeo de tipos apropiado
  - **Interfaces de servicio**: Plantillas de l√≥gica de negocio
  - **Controladores REST**: Endpoints HTTP con documentaci√≥n OpenAPI
  - **Mappers MapStruct**: Transformaci√≥n autom√°tica de datos
  - **Clases de prueba**: Generaci√≥n de tests para validaci√≥n de migraci√≥n

#### üìã Planificaci√≥n y Ejecuci√≥n de Migraci√≥n
- `cobol.migration.plan` - Creaci√≥n de planes de migraci√≥n detallados
  - Estrategias: completa, incremental, h√≠brida
  - Evaluaci√≥n de complejidad y estimaci√≥n de esfuerzo
  - An√°lisis de dependencias para orden de migraci√≥n
  - Soporte para m√∫ltiples frameworks objetivo (Spring Boot, Quarkus, etc.)

- `cobol.migration.apply` - Ejecuci√≥n controlada de planes de migraci√≥n
  - Capacidades de dry-run para pruebas seguras
  - Migraci√≥n paso a paso con puntos de control
  - Capacidades de rollback para recuperaci√≥n
  - Monitoreo de progreso y seguimiento de ejecuci√≥n

#### üìä M√©tricas y An√°lisis
- `cobol.metrics` - C√°lculo completo de m√©tricas de c√≥digo
  - **Complejidad ciclom√°tica**: An√°lisis de complejidad de procedimientos
  - **M√©tricas de calidad**: L√≠neas de c√≥digo, conteo de archivos, etc.
  - **Evaluaci√≥n de migraci√≥n**: Estimaci√≥n de complejidad de migraci√≥n
  - **An√°lisis de dependencias**: Mapeo de referencias cruzadas

#### üîç Comparaci√≥n y Diferencias
- `cobol.diff` - Generaci√≥n de diferencias para cambios de migraci√≥n
  - Diffs unificados para revisi√≥n de c√≥digo
  - Diffs sem√°nticos para an√°lisis de cambios l√≥gicos
  - Comparaci√≥n antes/despu√©s de la migraci√≥n
  - An√°lisis de impacto de cambios

#### üìë Copybooks y Datasets
- `cobol.copybook.migrate` - Generaci√≥n de modelos y artefactos Java desde copybooks COBOL

### üìë Herramientas JCL
- `jcl.convert` - Conversi√≥n de pasos JCL a scripts shell, GitHub Actions, Spring Batch o Airflow

## Inicio R√°pido

### Ejecutar el Servidor

```bash
SERVER_PORT=8181 mvn spring-boot:run
```

El servidor estar√° disponible en `http://localhost:8181`

### Documentaci√≥n API

Visita `http://localhost:8181/swagger-ui/index.html` para explorar la API interactivamente.

## Uso de la API

### 1. Protocolo MCP (Recomendado)

#### Inicializar Conexi√≥n MCP
```bash
curl -X POST -H "Content-Type: application/json" \
  -d '{"jsonrpc": "2.0", "id": "1", "method": "initialize", "params": {}}' \
  http://localhost:8181/
```

#### Listar Herramientas Disponibles
```bash
curl -X POST -H "Content-Type: application/json" \
  -d '{"jsonrpc": "2.0", "id": "2", "method": "tools/list", "params": {}}' \
  http://localhost:8181/
```

#### Obtener Manifiesto CLI
Permite a clientes CLI generar subcomandos autom√°ticamente.

```bash
curl -X POST -H "Content-Type: application/json" \
  -d '{"jsonrpc": "2.0", "id": "5", "method": "cli/manifest", "params": {}}' \
  http://localhost:8181/
```

La respuesta incluye un objeto `commands` con elementos que exponen los campos `name`, `description` e `inputSchema`:

```json
{
  "jsonrpc": "2.0",
  "id": "5",
  "result": {
    "commands": [
      {
        "name": "org.openrewrite.java.format.AutoFormat",
        "description": "Automatically format Java code",
        "inputSchema": {
          "type": "object",
          "properties": {
            "sourceCode": {
              "type": "string",
              "description": "Java source code to refactor"
            },
            "projectPath": {
              "type": "string",
              "description": "Path to the project (optional)"
            }
          },
          "required": ["sourceCode"]
        }
      }
    ]
  }
}
```

Los clientes pueden iterar sobre `commands` y utilizar cada `name`, `description` e `inputSchema` para generar subcomandos CLI.

#### Ejecutar Herramienta Java (OpenRewrite)
```bash
curl -X POST -H "Content-Type: application/json" \
  -d '{
    "jsonrpc": "2.0",
    "id": "3",
    "method": "tools/call",
    "params": {
      "name": "org.openrewrite.java.format.AutoFormat",
      "arguments": {
        "sourceCode": "public class Test{private int x=0;public void test(){System.out.println(\"Hello\");}}"
      }
    }
  }' \
  http://localhost:8181/
```

#### Analizar Programa COBOL
```bash
curl -X POST -H "Content-Type: application/json" \
  -d '{
    "jsonrpc": "2.0",
    "id": "4",
    "method": "tools/call",
    "params": {
      "name": "cobol.analyze",
      "arguments": {
        "workspacePath": "/path/to/cobol/project",
        "includeMetrics": true,
        "query": "FIND DATA-ITEMS WHERE USAGE IS COMP-3"
      }
    }
  }' \
  http://localhost:8181/
```

#### Generar Stubs Java desde COBOL
```bash
curl -X POST -H "Content-Type: application/json" \
  -d '{
    "jsonrpc": "2.0",
    "id": "5",
    "method": "tools/call",
    "params": {
      "name": "cobol.generate.stubs",
      "arguments": {
        "workspacePath": "/path/to/cobol/project",
        "targetPackage": "com.example.cobol.migrated",
        "generateTests": true,
        "targetFramework": "spring-boot"
      }
    }
  }' \
  http://localhost:8181/
```

#### Crear Plan de Migraci√≥n COBOL
```bash
curl -X POST -H "Content-Type: application/json" \
  -d '{
    "jsonrpc": "2.0",
    "id": "6",
    "method": "tools/call",
    "params": {
      "name": "cobol.migration.plan",
      "arguments": {
        "workspacePath": "/path/to/cobol/project",
        "migrationStrategy": "incremental",
        "targetFramework": "spring-boot",
        "includeComplexityAnalysis": true
      }
    }
  }' \
  http://localhost:8181/
```

#### Aplicar Plan de Migraci√≥n
```bash
curl -X POST -H "Content-Type: application/json" \
  -d '{
    "jsonrpc": "2.0",
    "id": "7",
    "method": "tools/call",
    "params": {
      "name": "cobol.migration.apply",
      "arguments": {
        "planId": "migration-plan-uuid-12345",
        "dryRun": true,
        "outputPath": "/path/to/java/output",
        "backupOriginal": true
      }
    }
  }' \
  http://localhost:8181/
```

#### Calcular M√©tricas de COBOL
```bash
curl -X POST -H "Content-Type: application/json" \
  -d '{
    "jsonrpc": "2.0",
    "id": "8",
    "method": "tools/call",
    "params": {
      "name": "cobol.metrics",
      "arguments": {
        "workspacePath": "/path/to/cobol/project",
        "includeComplexity": true,
        "includeDependencies": true,
        "generateReport": true
      }
    }
  }' \
  http://localhost:8181/
```

#### Listar Prompts
```bash
curl -X POST -H "Content-Type: application/json" \
  -d '{"jsonrpc": "2.0", "id": "4", "method": "prompts/list", "params": {}}' \
  http://localhost:8181/
```

#### Obtener Prompt
```bash
curl -X POST -H "Content-Type: application/json" \
  -d '{"jsonrpc": "2.0", "id": "5", "method": "prompts/get", "params": {"name": "format-java"}}' \
  http://localhost:8181/
```

#### Listar Recursos
```bash
curl -X POST -H "Content-Type: application/json" \
  -d '{"jsonrpc": "2.0", "id": "6", "method": "resources/list", "params": {}}' \
  http://localhost:8181/
```

#### Leer Recurso
```bash
curl -X POST -H "Content-Type: application/json" \
  -d '{"jsonrpc": "2.0", "id": "7", "method": "resources/read", "params": {"uri": "file://welcome.txt"}}' \
  http://localhost:8181/
```

### 2. API REST (Compatibilidad)

#### Listar Herramientas
```bash
curl http://localhost:8181/mcp/tools
```

#### Ejecutar Refactorizaci√≥n
```bash
curl -X POST -H "Content-Type: application/json" \
  -d '{
    "sourceCode": "public class Test { private String name = null; }", 
    "recipe": "org.openrewrite.java.cleanup.ExplicitInitialization"
  }' \
  http://localhost:8181/api/refactor
```

## Estructura del Proyecto

```
renovatio/
‚îú‚îÄ‚îÄ renovatio-shared/                   # Modelos y utilidades compartidas
‚îÇ   ‚îú‚îÄ‚îÄ domain/                        # Modelos de dominio base
‚îÇ   ‚îî‚îÄ‚îÄ nql/                          # Natural Query Language
‚îú‚îÄ‚îÄ renovatio-core/                    # N√∫cleo de la plataforma
‚îÇ   ‚îú‚îÄ‚îÄ application/                   # Servicios de aplicaci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ domain/                       # Modelos de dominio principales
‚îÇ   ‚îî‚îÄ‚îÄ infrastructure/               # Controladores e infraestructura
‚îú‚îÄ‚îÄ renovatio-provider-java/           # Proveedor Java (OpenRewrite)
‚îÇ   ‚îú‚îÄ‚îÄ service/                      # Servicios de refactorizaci√≥n Java
‚îÇ   ‚îî‚îÄ‚îÄ infrastructure/               # Integraci√≥n MCP para Java
‚îú‚îÄ‚îÄ renovatio-provider-cobol/          # Proveedor COBOL (Migraci√≥n a Java)
‚îÇ   ‚îú‚îÄ‚îÄ domain/                       # Modelos de dominio COBOL
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CobolProgram.java         # Representaci√≥n de programas COBOL
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CobolDataItem.java        # Estructuras de datos COBOL
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CobolMcpTool.java         # Herramientas MCP COBOL
‚îÇ   ‚îú‚îÄ‚îÄ service/                      # Servicios de migraci√≥n COBOL
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CobolParsingService.java  # Parsing y an√°lisis COBOL
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ JavaGenerationService.java # Generaci√≥n de c√≥digo Java
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MigrationPlanService.java # Planificaci√≥n de migraci√≥n
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ IndexingService.java      # Indexaci√≥n Lucene
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MetricsService.java       # C√°lculo de m√©tricas
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TemplateCodeGenerationService.java # Generaci√≥n basada en plantillas
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ResilientMigrationService.java # Operaciones resilientes
‚îÇ   ‚îî‚îÄ‚îÄ infrastructure/               # Configuraci√≥n e integraci√≥n MCP
‚îÇ       ‚îú‚îÄ‚îÄ CobolProviderConfiguration.java # Configuraci√≥n Spring
‚îÇ       ‚îî‚îÄ‚îÄ CobolMcpToolsProvider.java # Proveedor de herramientas MCP
‚îú‚îÄ‚îÄ renovatio-provider-jcl/            # Proveedor JCL (traducci√≥n a shell/CI)
‚îÇ   ‚îú‚îÄ‚îÄ service/                      # Parser y traductor JCL
‚îÇ   ‚îî‚îÄ‚îÄ infrastructure/               # Herramientas MCP para conversi√≥n
‚îú‚îÄ‚îÄ renovatio-agent/                   # Agente de ejecuci√≥n
‚îú‚îÄ‚îÄ renovatio-web/                     # Aplicaci√≥n web principal
‚îÇ   ‚îú‚îÄ‚îÄ McpServerApplication.java      # Aplicaci√≥n principal Spring Boot
‚îÇ   ‚îú‚îÄ‚îÄ application/                   # Servicios de aplicaci√≥n
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ McpToolingService.java    # Servicio principal MCP
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ RefactorService.java      # Servicio de refactorizaci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ domain/                       # Modelos de dominio web
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ mcp/                      # Modelos del protocolo MCP
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ McpRequest.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ McpResponse.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ McpError.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ McpTool.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ McpCapabilities.java
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RefactorRequest.java
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RefactorResponse.java
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Tool.java
‚îÇ   ‚îî‚îÄ‚îÄ infrastructure/               # Controladores
‚îÇ       ‚îú‚îÄ‚îÄ McpProtocolController.java # Controlador principal MCP
‚îÇ       ‚îú‚îÄ‚îÄ McpController.java        # Controlador REST MCP
‚îÇ       ‚îî‚îÄ‚îÄ RefactorController.java   # Controlador de refactorizaci√≥n
‚îî‚îÄ‚îÄ src/main/resources/
    ‚îú‚îÄ‚îÄ templates/                    # Plantillas Freemarker para COBOL
    ‚îî‚îÄ‚îÄ application.yml              # Configuraci√≥n principal
```

## Especificaci√≥n MCP

Este servidor implementa la especificaci√≥n del Protocolo de Contenido de Modelo versi√≥n `2025-06-18` y es completamente compatible con:

- **JSON-RPC 2.0**: Protocolo de comunicaci√≥n est√°ndar
- **Herramientas con esquemas**: Definiciones completas de entrada/salida
- **Capacidades del servidor**: Exposici√≥n de funcionalidades soportadas
- **Manejo de errores**: C√≥digos de error est√°ndar JSON-RPC

## Configuraci√≥n

### Dependencias Principales

#### Framework Base
- **Spring Boot 3.2.5**: Framework base de la aplicaci√≥n
- **Jackson 2.15.4**: Serializaci√≥n JSON

#### Refactorizaci√≥n Java
- **OpenRewrite 8.21.0**: Motor de refactorizaci√≥n Java
- **SpringDoc OpenAPI**: Documentaci√≥n autom√°tica de API

#### Migraci√≥n COBOL
- **JavaPoet 1.13.0**: Generaci√≥n de c√≥digo Java type-safe
- **Freemarker 2.3.32**: Motor de plantillas para generaci√≥n de c√≥digo
- **MapStruct 1.5.5**: Generaci√≥n autom√°tica de mappers
- **Apache Lucene 9.8.0**: Indexaci√≥n y b√∫squeda de c√≥digo
- **ANTLR4 4.13.1**: Parsing y validaci√≥n de gram√°ticas
- **Resilience4j 2.1.0**: Patrones de resistencia (circuit breaker, retry, timeout)
- **Micrometer 1.12.1**: M√©tricas y monitoreo

#### Operaciones Git
- **JGit 6.7.0**: Operaciones Git program√°ticas

### Variables de Entorno

#### Configuraci√≥n General
- `SERVER_PORT`: Puerto del servidor (por defecto 8181)
- `SPRING_PROFILES_ACTIVE`: Perfil activo de Spring

#### Configuraci√≥n COBOL
- `RENOVATIO_COBOL_PARSER_MAX_FILE_SIZE`: Tama√±o m√°ximo de archivo COBOL (por defecto 10MB)
- `RENOVATIO_COBOL_GENERATION_TARGET_PACKAGE`: Paquete Java objetivo por defecto
- `RENOVATIO_COBOL_MIGRATION_DEFAULT_STRATEGY`: Estrategia de migraci√≥n por defecto (incremental)

### Configuraci√≥n Avanzada

#### application.yml Completo
```yaml
server:
  port: 8181

renovatio:
  cobol:
    parser:
      max-file-size: 10MB
      parallel-processing: true
      encoding: UTF-8
      dialect: IBM  # IBM, GNU, Micro Focus
    generation:
      target-package: org.shark.renovatio.generated.cobol
      generate-tests: true
      target-framework: spring-boot  # spring-boot, quarkus, jakarta-ee
      java-version: 17
    migration:
      default-strategy: incremental  # incremental, full, hybrid
      backup-original: true
      dry-run-default: true
      max-parallel-jobs: 4
    indexing:
      enabled: true
      index-path: ./cobol-index
      real-time-updates: true
    metrics:
      complexity-threshold: 10
      generate-reports: true
      export-format: json  # json, csv, xml
  
  resilience:
    circuit-breaker:
      failure-rate-threshold: 50
      wait-duration-in-open-state: 30s
    retry:
      max-attempts: 3
      wait-duration: 1s
    timeout:
      duration: 30s

management:
  endpoints:
    web:
      exposure:
        include: health,metrics,prometheus
  endpoint:
    health:
      show-details: always
```

## Desarrollo

### Compilar el Proyecto Completo
```bash
mvn clean compile
```

### Compilar Solo el Proveedor COBOL
```bash
mvn clean compile -pl renovatio-provider-cobol
```

### Compilar Solo el Proveedor JCL
```bash
mvn clean compile -pl renovatio-provider-jcl
```

### Ejecutar Tests
```bash
# Todos los tests
mvn test

# Solo tests de COBOL
mvn test -pl renovatio-provider-cobol

# Solo tests de Java/OpenRewrite
mvn test -pl renovatio-provider-java

# Solo tests de JCL
mvn test -pl renovatio-provider-jcl
```

### Ejecutar con Perfil COBOL Habilitado
```bash
SERVER_PORT=8181 mvn spring-boot:run -Dspring-boot.run.profiles=cobol
```

### Desarrollo Local con Hot Reload
```bash
# Terminal 1: Compilaci√≥n autom√°tica
mvn compile -pl renovatio-provider-cobol -T 1C

# Terminal 2: Servidor con reload
mvn spring-boot:run -Dspring-boot.run.jvmArguments="-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=5005"
```

### Generar Documentaci√≥n
La documentaci√≥n OpenAPI se genera autom√°ticamente y est√° disponible en:
- Swagger UI: `http://localhost:8181/swagger-ui/index.html`
- OpenAPI JSON: `http://localhost:8181/v3/api-docs`
- Documentaci√≥n COBOL espec√≠fica: `http://localhost:8181/cobol/docs`

### Testing de Migraci√≥n COBOL

#### Preparar Proyecto de Prueba
```bash
# Crear estructura de prueba
mkdir -p /tmp/cobol-test/{src,output}
cat > /tmp/cobol-test/src/CUSTOMER.cbl << 'EOF'
       IDENTIFICATION DIVISION.
       PROGRAM-ID. CUSTOMER.
       
       DATA DIVISION.
       WORKING-STORAGE SECTION.
       01 CUSTOMER-RECORD.
          05 CUSTOMER-ID     PIC 9(6).
          05 CUSTOMER-NAME   PIC X(30).
          05 CUSTOMER-BALANCE PIC 9(8)V99 COMP-3.
       
       PROCEDURE DIVISION.
       MAIN-LOGIC.
           MOVE 123456 TO CUSTOMER-ID
           MOVE "JOHN DOE" TO CUSTOMER-NAME
           MOVE 1234.56 TO CUSTOMER-BALANCE
           DISPLAY "Customer: " CUSTOMER-NAME
           STOP RUN.
EOF
```

#### Probar An√°lisis
```bash
curl -X POST -H "Content-Type: application/json" \
  -d '{
    "jsonrpc": "2.0",
    "id": "test-1",
    "method": "tools/call",
    "params": {
      "name": "cobol.analyze",
      "arguments": {
        "workspacePath": "/tmp/cobol-test/src",
        "includeMetrics": true
      }
    }
  }' \
  http://localhost:8181/ | jq .
```

#### Probar Generaci√≥n de Stubs
```bash
curl -X POST -H "Content-Type: application/json" \
  -d '{
    "jsonrpc": "2.0",
    "id": "test-2",
    "method": "tools/call",
    "params": {
      "name": "cobol.generate.stubs",
      "arguments": {
        "workspacePath": "/tmp/cobol-test/src",
        "targetPackage": "com.example.customer",
        "generateTests": true
      }
    }
  }' \
  http://localhost:8181/ | jq .
```

## Contribuir

1. Fork el repositorio
2. Crea una rama para tu feature
3. Realiza tus cambios
4. Ejecuta los tests
5. Env√≠a un pull request

## Roadmap

### ‚òï Mejoras Java (OpenRewrite)
- [ ] Mejoras en la integraci√≥n y cobertura de recetas del SDK oficial de OpenRewrite
- [ ] Soporte para recetas personalizadas
- [ ] Repositorios de recetas: posibilidad de agregar recetas propias y gestionarlas desde el servidor
- [ ] An√°lisis de impacto de refactorizaciones
- [ ] Integraci√≥n con sistemas de control de versiones

### üè¢ Mejoras COBOL (Migraci√≥n)
- [ ] **Integraci√≥n ProLeap/Koopa**: Parser COBOL de nivel de producci√≥n para an√°lisis completo
- [ ] **Soporte multi-dialecto**: IBM COBOL, GNU COBOL, Micro Focus COBOL
- [x] **Migraci√≥n de copybooks**: An√°lisis y conversi√≥n de copybooks compartidos
- [x] **Migraci√≥n de JCL**: Conversi√≥n de Job Control Language a scripts equivalentes
- [x] **Integraci√≥n CICS**: Soporte para transacciones CICS y generaci√≥n de equivalentes REST
- [x] **Migraci√≥n de DB2**: Conversi√≥n de SQL embebido a JPA/Hibernate
- [ ] **An√°lisis de rendimiento**: Comparaci√≥n de rendimiento antes/despu√©s de migraci√≥n
- [ ] **Validaci√≥n autom√°tica**: Generaci√≥n de tests de equivalencia funcional
- [ ] **Plantillas personalizables**: Sistema de plantillas extensible para diferentes arquitecturas objetivo
- [ ] **Dashboard de migraci√≥n**: Interfaz web para monitoreo en tiempo real
- [ ] **Integraci√≥n CI/CD**: Plugins para Jenkins, GitLab CI, GitHub Actions
- [ ] **Reportes ejecutivos**: Dashboards de progreso para stakeholders

### üîß Mejoras de Plataforma
- [ ] **M√©tricas y monitoring avanzado**: Dashboards de Grafana, alertas Prometheus
- [ ] **Autenticaci√≥n y autorizaci√≥n**: Integraci√≥n OAuth2, RBAC
- [ ] **Soporte para m√∫ltiples lenguajes**: Expansi√≥n a C++, .NET, mainframe assembler
- [ ] **API GraphQL**: Interfaz alternativa para consultas complejas
- [ ] **Integraci√≥n con repositorios**: GitHub, GitLab, Bitbucket
- [ ] **Cache distribuido**: Redis/Hazelcast para operaciones escalables
- [ ] **Procesamiento batch**: Migraci√≥n de proyectos grandes en background

## Ventajas T√©cnicas

### üèóÔ∏è Arquitectura Robusta
- **Plataforma multi-lenguaje**: Soporte nativo para Java y COBOL con arquitectura extensible
- **Patr√≥n Provider**: Arquitectura modular que permite agregar nuevos lenguajes f√°cilmente
- **Procesamiento local**: Toda la refactorizaci√≥n y an√°lisis se realiza localmente, garantizando privacidad y velocidad
- **Sin dependencias externas**: No requiere API keys ni servicios externos para funcionalidad b√°sica

### ‚òï Capacidades Java
- **SDK oficial de OpenRewrite**: Acceso completo a todas las recetas y herramientas del ecosistema OpenRewrite
- **Refactorizaci√≥n enterprise**: Soporte para proyectos Java de gran escala
- **Migraci√≥n de versiones**: Automatizaci√≥n de actualizaciones entre versiones principales de Java

### üè¢ Capacidades COBOL Avanzadas
- **Migraci√≥n integral**: No solo conversi√≥n de sintaxis, sino generaci√≥n de arquitecturas Java modernas
- **An√°lisis sem√°ntico**: Comprensi√≥n profunda de la l√≥gica de negocio COBOL
- **Generaci√≥n inteligente**: DTOs, servicios, controladores REST y mappers autom√°ticos
- **Patrones modernos**: Aplicaci√≥n de mejores pr√°cticas Java y patrones de dise√±o
- **Validaci√≥n de migraci√≥n**: Generaci√≥n autom√°tica de tests para verificar equivalencia funcional

### üîß Operaciones Resilientes
- **Circuit breakers**: Protecci√≥n contra fallos en cascada durante migraciones grandes
- **Reintentos inteligentes**: Recuperaci√≥n autom√°tica de fallos transitorios
- **Timeouts configurables**: Prevenci√≥n de operaciones que se cuelguen
- **Monitoreo en tiempo real**: M√©tricas Prometheus y health checks
- **Rollback seguro**: Capacidad de revertir migraciones parciales

### üéØ Productividad del Desarrollador
- **Dry-run**: Simulaci√≥n segura de migraciones antes de aplicar cambios
- **Migraci√≥n incremental**: Modernizaci√≥n paso a paso sin big-bang
- **B√∫squeda avanzada**: √çndices Lucene para navegaci√≥n r√°pida en c√≥digo legacy
- **Plantillas personalizables**: Adaptaci√≥n a est√°ndares y arquitecturas espec√≠ficas

## Licencia

Este proyecto est√° bajo la licencia MIT.

---

**Renovatio** - La plataforma definitiva para refactorizaci√≥n multi-lenguaje y modernizaci√≥n de aplicaciones legacy. Haciendo la refactorizaci√≥n de c√≥digo Java y la migraci√≥n COBOL accesible atrav√©s del Protocolo de Contenido de Modelo.

### üåü Casos de Uso Principales

- **Modernizaci√≥n de Mainframe**: Migraci√≥n completa de aplicaciones COBOL a arquitecturas Java modernas
- **Refactorizaci√≥n Enterprise**: Actualizaci√≥n de aplicaciones Java legacy a versiones modernas
- **An√°lisis de C√≥digo Legacy**: Comprensi√≥n profunda de aplicaciones complejas antes de migraci√≥n
- **Automatizaci√≥n DevOps**: Integraci√≥n en pipelines CI/CD para refactorizaci√≥n continua
- **Evaluaci√≥n de Migraci√≥n**: An√°lisis de complejidad y estimaci√≥n de esfuerzo para proyectos de modernizaci√≥n

### üéØ Para Qui√©n es Renovatio

- **Arquitectos de Software**: Planificaci√≥n y dise√±o de migraciones complejas
- **Desarrolladores Senior**: Herramientas avanzadas para refactorizaci√≥n y modernizaci√≥n
- **Equipos DevOps**: Automatizaci√≥n de procesos de migraci√≥n y refactorizaci√≥n
- **CTOs y Gerentes T√©cnicos**: Visibilidad y control sobre proyectos de modernizaci√≥n
- **Consultores de Migraci√≥n**: Herramientas profesionales para evaluaci√≥n y ejecuci√≥n
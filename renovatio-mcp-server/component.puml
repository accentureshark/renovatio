@startuml
' renovatio-mcp-server Component Diagram

title Renovatio MCP Server - Protocol Implementation

package "renovatio-mcp-server" {
  
  ' MCP Protocol Layer
  package "MCP Protocol Implementation" {
    [McpController] #LightBlue
    [McpProtocolService] #LightBlue
    [McpCapabilities] #LightBlue
    [McpErrorHandler] #LightBlue
  }
  
  ' MCP Domain Models
  package "MCP Domain Models" {
    [McpRequest] #LightCyan
    [McpResponse] #LightCyan
    [McpError] #LightCyan
    [McpTool] #LightCyan
    [McpPrompt] #LightCyan
    [McpResource] #LightCyan
  }
  
  ' Application Configuration
  package "Application Configuration" {
    [McpServerApplication] #LightGreen
    [McpServerConfiguration] #LightGreen
    [SecurityConfiguration] #LightGreen
    [HealthConfiguration] #LightGreen
  }
}

' External dependencies
[renovatio-core] #Orange
[Spring Boot] #LightYellow

' Connections within MCP server
McpController --> McpProtocolService : Delegates
McpProtocolService --> McpCapabilities : Uses
McpProtocolService --> McpErrorHandler : Error Handling
McpController --> McpRequest : Receives
McpController --> McpResponse : Returns
McpProtocolService --> McpTool : Manages
McpProtocolService --> McpPrompt : Manages
McpProtocolService --> McpResource : Manages

' Configuration connections
McpServerApplication --> McpServerConfiguration : Uses
McpServerApplication --> SecurityConfiguration : Uses
McpServerApplication --> HealthConfiguration : Uses
McpController --> McpServerConfiguration : Configured by

' External connections
McpProtocolService --> [renovatio-core] : Uses Pure Engine
McpServerApplication --> [Spring Boot] : Extends

note top of McpController
  **MCP Protocol Endpoint**
  - Serves on root path "/"
  - Handles all MCP methods:
    * initialize, ping, shutdown
    * tools/list, tools/call
    * prompts/list, prompts/get
    * resources/list, resources/read
    * content/read, content/write
    * workspace/list, workspace/describe
end note

note bottom of McpProtocolService
  **Protocol Implementation**
  - Full MCP 2025-06-18 compliance
  - JSON-RPC 2.0 protocol
  - No business logic
  - Pure protocol translation
end note

note right of [renovatio-core]
  **Core Engine Integration**
  - Protocol-agnostic tool execution
  - Language provider registry
  - Recipe management
  - File operations
end note

@enduml